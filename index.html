<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>App Combinada: JDE, Web, Madera y Fabrica</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Selector Global -->
  <div class="container no-print">
    <div class="card">
      <h1>Seleccione el Modo</h1>
      <div class="flex flex-wrap justify-center items-center">
         <label>
          <input type="radio" name="modeSelector" value="JDE" checked> JDE
        </label>
        <label>
          <input type="radio" name="modeSelector" value="WEB"> Web
        </label>
        <label>
          <input type="radio" name="modeSelector" value="MADERA"> Madera Paquetes
        </label>
        <label>
          <input type="radio" name="modeSelector" value="FABRICA"> Fabrica
        </label>
      </div>
    </div>
  </div>

  <!-- ==================== APP JDE ==================== -->
  <div id="jdeApp" class="container" style="display: block;"> <!-- Empieza visible -->
    <div id="jdePrintHeader" class="printHeader">
      <!-- ... Contenido cabecera JDE (sin cambios) ... -->
      <div class="header-row">
        <div class="brand">Gabarró</div>
        <div class="contact">
          <p style="margin:0;">
            <strong>Marcos Sanchez</strong><br>
            Tel. 669 22 80 10<br>
            Email Consultas: marcos.sanchez@gabarro.com<br>
            Email Pedidos: ventas.galicia@gabarro.com
          </p>
        </div>
      </div>
      <div style="margin-top:1rem;">
        <p>
          <strong>Precio picking:</strong> se aplica para pedidos superiores a 180 € netos.<br>
          <strong>Portes:</strong> 30 € para pedidos con un importe inferior a 400 € netos.<br>
          <strong>Aviso:</strong> Esta tarifa puede estar sujeta a variaciones; verifiquen el precio antes de realizar el pedido.
        </p>
      </div>
      <hr>
    </div>
    <div class="card no-print">
      <h1>Lienzo - Hoja de datos (JDE)</h1>
      <div style="text-align:right; margin-bottom:1rem;">
        <button id="jdeBtnPrint">Imprimir PDF</button>
      </div>
      <!-- ... Resto de controles JDE (radios B0/A3/M3, textarea, botones Add/Clear, checkbox Unidad) ... -->
       <div class="flex justify-center items-center" style="margin-bottom:0.5rem;">
        <label><input type="radio" name="discountConfig" value="B0"> B0</label>
        <label><input type="radio" name="discountConfig" value="A3" checked> A3</label>
        <label><input type="radio" name="discountConfig" value="M3"> M3</label>
      </div>
      <div class="form-section">
        <label for="jdeInputData">Pega aquí los datos (JDE o WEB separados por tabuladores):</label>
        <textarea id="jdeInputData"></textarea>
      </div>
      <div class="flex" style="justify-content:center; margin-top:0.5rem;">
        <button id="jdeBtnAddTable">Agregar Tabla</button>
        <button id="jdeBtnClearText">Borrar Texto</button>
      </div>
      <div class="flex justify-center items-center" style="margin-top:0.5rem;">
        <label><input type="checkbox" id="jdeChkUnidad" checked> Unidad (m²)</label>
      </div>
      <div id="jdeColumnsContainer" class="flex flex-wrap justify-center items-center" style="margin-top:1rem;">
        <!-- Checkboxes columnas JDE -->
      </div>
    </div>
    <div id="jdeTablesContainer" class="card">
      <!-- Tablas JDE -->
    </div>
  </div>

  <!-- ==================== APP WEB ==================== -->
  <div id="webApp" class="container" style="display: none;">
     <div id="webPrintHeader" class="printHeader">
       <!-- ... Contenido cabecera Web (sin cambios) ... -->
        <div class="header-row">
        <div class="brand">Gabarró</div>
        <div class="contact">
          <p style="margin:0;">
            <strong>Marcos Sanchez</strong><br>
            Tel. 669 22 80 10<br>
            Email Consultas: marcos.sanchez@gabarro.com<br>
            Email Pedidos: ventas.galicia@gabarro.com
          </p>
        </div>
      </div>
      <div style="margin-top:1rem;">
        <p>
          <strong>Precio picking:</strong> se aplica para pedidos superiores a 180 € Netos.<br>
          <strong>Portes:</strong> 30 € para pedidos con un importe inferior a 400 € netos.
        </p>
      </div>
      <hr>
     </div>
     <div class="card no-print">
       <h1>Tabla Precios Web</h1>
       <div style="text-align:right; margin-bottom:1rem;">
         <button id="webBtnPrint">Imprimir PDF</button>
       </div>
        <!-- ... Resto de controles Web (radios A/B/M, checkbox Paquete, textarea, botones Add/Clear, checkbox Unidad) ... -->
         <div class="flex justify-center items-center" style="margin-bottom:0.5rem;">
            <label><input type="radio" name="discountConfigWeb" value="A" checked> Cliente A</label>
            <label><input type="radio" name="discountConfigWeb" value="B"> Cliente B</label>
            <label><input type="radio" name="discountConfigWeb" value="M"> Cliente M</label>
          </div>
          <div class="flex justify-center items-center" style="margin-bottom:0.5rem;">
            <label><input type="checkbox" id="webChkPaquete38"> Paquete 38%</label>
          </div>
          <div class="form-section">
            <label for="webInputData">Pega aquí los datos:</label>
            <textarea id="webInputData"></textarea>
          </div>
          <div class="flex" style="justify-content:center; margin-top:0.5rem;">
            <button id="webBtnAddTable">Agregar Tabla</button>
            <button id="webBtnClearText">Borrar Texto</button>
          </div>
          <div class="flex justify-center items-center" style="margin-top:0.5rem;">
            <label><input type="checkbox" id="webChkUnidad" checked> Unidad (m²)</label>
          </div>
        <div id="webColumnsContainer" class="flex flex-wrap justify-center items-center" style="margin-top:1rem;">
           <!-- Checkboxes columnas Web -->
        </div>
     </div>
     <div id="webTablesContainer" class="card">
       <!-- Tablas Web -->
     </div>
  </div>

  <!-- ==================== APP MADERA ==================== -->
  <div id="maderaApp" class="container" style="display: none;">
    <!-- El contenedor interno .container aquí puede ser redundante si #maderaApp ya es .container -->
    <div> <!-- Quitamos la clase container interna redundante -->
      <div class="header"> <!-- Clase específica Madera -->
        <h3>Tabla de Precios de Madera</h3>
        <button class="btn btn-outline btn-sm no-print" id="maderaToggleConfigBtn">-</button> <!-- ID único -->
      </div>
      <div class="config-section no-print" id="maderaConfigSection"> <!-- ID único -->
        <div style="margin-bottom: 1rem; display: flex; gap: 1.5rem; align-items: center; flex-wrap: wrap;">
          <div>
            <input type="checkbox" id="maderaOnlyPackageChk" /> <!-- ID único -->
            <label for="maderaOnlyPackageChk">Sólo Paquete</label>
          </div>
          <div>
            <input type="checkbox" id="maderaUse38PackageChk" /> <!-- ID único, corregido nombre -->
            <label for="maderaUse38PackageChk">Paquete 38%</label>
          </div>
        </div>
        <div class="config-grid">
          <input type="text" placeholder="Descripción de la madera" id="maderaDescriptionInput" /> <!-- ID único -->
          <input type="text" placeholder="Precio Base de la madera (€ por m³)" id="maderaPriceInput" /> <!-- ID único -->
          <textarea placeholder="Medidas (picking). Formato JDE: Almacén[0] M3[2] Largo[última]" id="maderaPickingDimensionsTextarea" rows="4"></textarea> <!-- ID único -->
          <textarea placeholder="Medidas (paquetes). Formato JDE: Almacén[0] Paquete[3] Largo[6] M3[9]" id="maderaPackageDimensionsTextarea" rows="4"></textarea> <!-- ID único -->
        </div>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
          <button class="btn" id="maderaAddBtn">Añadir Madera</button> <!-- ID único -->
          <button class="btn btn-destructive" id="maderaClearAllBtn">Borrar Todo</button> <!-- ID único -->
          <button class="btn btn-outline" id="maderaPrintBtn">Imprimir</button> <!-- ID único -->
        </div>
      </div>
      <div class="cards-container" id="maderaCardsContainer"> <!-- ID único -->
        <!-- Tarjetas Madera -->
      </div>
    </div>
  </div>

  <!-- ==================== APP FABRICA ==================== -->
  <div id="fabricaApp" class="container" style="display: none;">
    <div class="container"> <!-- Contenedor interno Fabrica -->
       <h1>Generador de Tabla de Precios Fabrica</h1>
        <div class="client-selector no-print">
           <label>Tipo de Cliente:</label>
           <div class="client-options">
             <div class="client-option">
               <input type="radio" id="fabricaClientB0" name="fabricaClientType" value="B0" checked> <!-- IDs/Name únicos -->
               <label for="fabricaClientB0">B0</label>
             </div>
             <div class="client-option">
               <input type="radio" id="fabricaClientA3" name="fabricaClientType" value="A3">
               <label for="fabricaClientA3">A3</label>
             </div>
             <div class="client-option">
               <input type="radio" id="fabricaClientM3" name="fabricaClientType" value="M3">
               <label for="fabricaClientM3">M3</label>
             </div>
           </div>
        </div>
        <div class="client-info no-print" id="fabricaClientInfo"> <!-- ID único -->
           <!-- Info descuentos -->
        </div>
        <div class="input-group no-print">
           <div class="input-field quantity">
             <label for="fabricaQuantity">Cantidad:</label>
             <input type="number" id="fabricaQuantity" min="1" max="999" value="1"> <!-- ID único -->
           </div>
           <div class="input-field">
             <label for="fabricaDescription">Descripción:</label>
             <input type="text" id="fabricaDescription" placeholder="Descripción del producto"> <!-- ID único -->
           </div>
           <div class="input-field">
             <label for="fabricaDimensions">Medidas (mm):</label>
             <input type="text" id="fabricaDimensions" placeholder="Ej: 2000x1000"> <!-- ID único -->
           </div>
           <div class="input-field price">
             <label for="fabricaPricePvp">PVP (€/m²):</label>
             <input type="number" id="fabricaPricePvp" step="0.01" min="0" placeholder="0.00"> <!-- ID único -->
           </div>
        </div>
        <div class="buttons no-print">
           <button id="fabricaAddRowBtn">Añadir Fila</button> <!-- ID único -->
           <button id="fabricaClearAllBtn" class="delete">Borrar Todo</button> <!-- ID único -->
           <button id="fabricaPrintBtn" class="print">Imprimir</button> <!-- ID único -->
        </div>
        <div id="fabricaTableContainer"> <!-- ID único -->
           <table class="price-table" id="fabricaPriceTable"> <!-- ID único -->
             <thead>
                <tr>
                   <th>Cantidad</th>
                   <th>Descripción</th>
                   <th>Medidas (mm)</th>
                   <th>Precio Neto (€/m²)</th>
                   <th>Precio Neto Tablero</th>
                   <th>Total Neto</th>
                   <th class="no-print"></th>
                </tr>
             </thead>
             <tbody></tbody>
             <tfoot>
                <tr>
                   <td colspan="5" style="text-align: right;"><strong>Total:</strong></td>
                   <td id="fabricaTotalPrice">0.00 €</td> <!-- ID único -->
                   <td class="no-print"></td>
                </tr>
             </tfoot>
           </table>
        </div>
    </div> <!-- Fin contenedor interno Fabrica -->
  </div> <!-- Fin contenedor #fabricaApp -->

  <!-- Script externo al final -->
  <script src="script.js" defer></script>
</body>
</html>
