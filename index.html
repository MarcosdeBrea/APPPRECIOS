<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>App Combinada: JDE, Web, Madera y Fabrica</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container no-print">
    <div class="card">
      <h1>Seleccione el Modo</h1>
      <div class="flex flex-wrap justify-center items-center">
         <label>
          <input type="radio" name="modeSelector" value="JDE" checked>
          JDE
        </label>
        <label>
          <input type="radio" name="modeSelector" value="WEB">
          Web
        </label>
        <label>
          <input type="radio" name="modeSelector" value="MADERA">
          Madera Paquetes
        </label>
        <label> {/* Nueva opción */}
          <input type="radio" name="modeSelector" value="FABRICA">
          Fabrica
        </label>
      </div>
    </div>
  </div>

  <div id="jdeApp" class="container">
    <div id="jdePrintHeader" class="printHeader">
      <div class="header-row">
        <div class="brand">Gabarró</div>
        <div class="contact">
          <p style="margin:0;">
            <strong>Marcos Sanchez</strong><br>
            Tel. 669 22 80 10<br>
            Email Consultas: marcos.sanchez@gabarro.com<br>
            Email Pedidos: ventas.galicia@gabarro.com
          </p>
        </div>
      </div>
      <div style="margin-top:1rem;">
        <p>
          <strong>Precio picking:</strong> se aplica para pedidos superiores a 180 € netos.<br>
          <strong>Portes:</strong> 30 € para pedidos con un importe inferior a 400 € netos.<br>
          <strong>Aviso:</strong> Esta tarifa puede estar sujeta a variaciones; verifiquen el precio antes de realizar el pedido.
        </p>
      </div>
      <hr>
    </div>
    <div class="card no-print">
      <h1>Lienzo - Hoja de datos (JDE)</h1>
      <div style="text-align:right; margin-bottom:1rem;">
        <button id="jdeBtnPrint">Imprimir PDF</button>
      </div>
      <div class="flex justify-center items-center" style="margin-bottom:0.5rem;">
        <label>
          <input type="radio" name="discountConfig" value="B0">
          B0
        </label>
        <label>
          <input type="radio" name="discountConfig" value="A3" checked>
          A3
        </label>
        <label>
          <input type="radio" name="discountConfig" value="M3">
          M3
        </label>
      </div>
      <div class="form-section">
        <label for="jdeInputData">Pega aquí los datos (JDE o WEB separados por tabuladores):</label>
        <textarea id="jdeInputData"></textarea>
      </div>
      <div class="flex" style="justify-content:center; margin-top:0.5rem;">
        <button id="jdeBtnAddTable">Agregar Tabla</button>
        <button id="jdeBtnClearText">Borrar Texto</button>
      </div>
      <div class="flex justify-center items-center" style="margin-top:0.5rem;">
        <label>
          <input type="checkbox" id="jdeChkUnidad" checked>
          Unidad (m²)
        </label>
      </div>
      <div id="jdeColumnsContainer" class="flex flex-wrap justify-center items-center" style="margin-top:1rem;">
        </div>
    </div>
    <div id="jdeTablesContainer" class="card">
      </div>
  </div>

  <div id="webApp" class="container" style="display:none;">
    <div id="webPrintHeader" class="printHeader">
      <div class="header-row">
        <div class="brand">Gabarró</div>
        <div class="contact">
          <p style="margin:0;">
            <strong>Marcos Sanchez</strong><br>
            Tel. 669 22 80 10<br>
            Email Consultas: marcos.sanchez@gabarro.com<br>
            Email Pedidos: ventas.galicia@gabarro.com
          </p>
        </div>
      </div>
      <div style="margin-top:1rem;">
        <p>
          <strong>Precio picking:</strong> se aplica para pedidos superiores a 180 € Netos.<br>
          <strong>Portes:</strong> 30 € para pedidos con un importe inferior a 400 € netos.
        </p>
      </div>
      <hr>
    </div>
    <div class="card no-print">
      <h1>Tabla Precios Web</h1>
      <div style="text-align:right; margin-bottom:1rem;">
        <button id="webBtnPrint">Imprimir PDF</button>
      </div>
      <div class="flex justify-center items-center" style="margin-bottom:0.5rem;">
        <label>
          <input type="radio" name="discountConfigWeb" value="A" checked>
          Cliente A
        </label>
        <label>
          <input type="radio" name="discountConfigWeb" value="B">
          Cliente B
        </label>
        <label>
          <input type="radio" name="discountConfigWeb" value="M">
          Cliente M
        </label>
      </div>
      <div class="flex justify-center items-center" style="margin-bottom:0.5rem;">
        <label>
          <input type="checkbox" id="webChkPaquete38">
          Paquete 38%
        </label>
      </div>
      <div class="form-section">
        <label for="webInputData">Pega aquí los datos:</label>
        <textarea id="webInputData"></textarea>
      </div>
      <div class="flex" style="justify-content:center; margin-top:0.5rem;">
        <button id="webBtnAddTable">Agregar Tabla</button>
        <button id="webBtnClearText">Borrar Texto</button>
      </div>
      <div class="flex justify-center items-center" style="margin-top:0.5rem;">
        <label>
          <input type="checkbox" id="webChkUnidad" checked>
          Unidad (m²)
        </label>
      </div>
      <div id="webColumnsContainer" class="flex flex-wrap justify-center items-center" style="margin-top:1rem;">
        </div>
    </div>
    <div id="webTablesContainer" class="card">
      </div>
  </div>

  <div id="maderaApp" class="container" style="display:none;">
    <div class="container"> {/* Contenedor interno de Madera */}
      <div class="header">
        <h3>Tabla de Precios de Madera</h3>
        <button class="btn btn-outline btn-sm no-print" id="toggleConfigBtn">-</button>
      </div>

      <div class="config-section no-print" id="configSection">
        <div style="margin-bottom: 1rem; display: flex; gap: 1.5rem; align-items: center;">
          <div>
            <input type="checkbox" id="onlyPackageChk" />
            <label for="onlyPackageChk">Sólo Paquete</label>
          </div>
          <div>
             {/* Asegúrate que el ID coincide con el usado en JS ('use36PackageChk') */}
            <input type="checkbox" id="use36PackageChk" />
            <label for="use36PackageChk">Paquete 38%</label>
          </div>
        </div>
        <div class="config-grid" style="display: grid; gap: 1rem; margin-bottom: 1rem;">
          <input type="text" placeholder="Descripción de la madera" id="descriptionInput" />
          <input type="text" placeholder="Precio Base de la madera (€ por m³)" id="priceInput" />
          <textarea placeholder="Medidas (picking). Se usan col[2] para m³ y la última col para largo." id="pickingDimensionsTextarea" rows="4"></textarea>
          <textarea placeholder="Medidas (paquetes). Se usan col[3] para paquete, col[9] para m³, col[6] para largo." id="packageDimensionsTextarea" rows="4"></textarea>
        </div>
        <div style="display: flex; gap: 1rem;">
          <button class="btn" id="addBtn">Añadir Madera</button>
          <button class="btn btn-destructive" id="clearAllBtn">Borrar Todo</button>
          <button class="btn btn-outline" id="printBtn">Imprimir</button>
        </div>
      </div>

      <div class="cards-container" id="cardsContainer">
        </div>
    </div>
  </div>

  <div id="fabricaApp" class="container" style="display:none;"> {/* Nuevo contenedor, inicialmente oculto */}
      {/* El HTML interno de Fabrica va aquí (sin DOCTYPE, head, style, script) */}
      <div class="container"> {/* Contenedor interno de Fabrica */}
        <h1>Generador de Tabla de Precios Fabrica</h1>

        <div class="client-selector no-print">
            <label>Tipo de Cliente:</label>
            <div class="client-options">
                <div class="client-option">
                    <input type="radio" id="clientB0" name="clientType" value="B0" checked>
                    <label for="clientB0">B0</label>
                </div>
                <div class="client-option">
                    <input type="radio" id="clientA3" name="clientType" value="A3">
                    <label for="clientA3">A3</label>
                </div>
                <div class="client-option">
                    <input type="radio" id="clientM3" name="clientType" value="M3">
                    <label for="clientM3">M3</label>
                </div>
            </div>
        </div>

        <div class="client-info no-print" id="clientInfo">
            {/* El contenido se genera dinámicamente por JS */}
        </div>

        <div class="input-group no-print">
            <div class="input-field quantity">
                <label for="quantity">Cantidad:</label>
                <input type="number" id="quantity" min="1" max="999" value="1">
            </div>
            <div class="input-field">
                <label for="description">Descripción:</label>
                <input type="text" id="description" placeholder="Descripción del producto">
            </div>
            <div class="input-field">
                <label for="dimensions">Medidas (mm):</label>
                <input type="text" id="dimensions" placeholder="Ej: 2000x1000">
            </div>
            <div class="input-field price">
                <label for="pricePvp">PVP:</label>
                <input type="number" id="pricePvp" step="0.01" min="0" placeholder="0.00">
            </div>
        </div>

        <div class="buttons no-print">
            <button id="addRow">Añadir Fila</button>
            <button id="clearFields" class="delete">Borrar Todo</button> {/* Cuidado con ID repetido si no se encapsula JS */}
            <button id="printTable" class="print">Imprimir</button> {/* Cuidado con ID repetido */}
        </div>

        <div id="tableContainer">
            <table class="price-table" id="priceTable"> {/* Cuidado con ID repetido */}
                <thead>
                    <tr>
                        <th>Cantidad</th>
                        <th>Descripción</th>
                        <th>Medidas (mm)</th>
                        <th>Precio Neto (€/m²)</th>
                        <th>Precio Neto Tablero</th>
                        <th>Total Neto</th>
                        <th class="no-print"></th>
                    </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr>
                        <td colspan="5" style="text-align: right;"><strong>Total:</strong></td>
                        <td id="totalPrice">0.00 €</td> {/* Cuidado con ID repetido */}
                        <td class="no-print"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div> {/* Fin contenedor interno Fabrica */}
  </div> {/* Fin contenedor #fabricaApp */}


  {/* Añadido 'defer' para asegurar que el HTML se cargue antes de ejecutar JS */}
  <script src="script.js" defer></script>
</body>
</html>
